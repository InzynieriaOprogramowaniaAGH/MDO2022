# Zajęcia 05

### Zestawienie platformy Kubernetes

* Upewnij się, że kontener jest dostępny
* Zainstaluj wymagania wstępne dla środowiska Minikube
* Zainstaluj minikube i kubectl:

curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube

curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"

* Przedstaw uruchomione oprogramowanie wstępne (i usługi)
  * Platforma konteneryzacji
  * Otwarte porty
  * Stan Dockera
![img0](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img0.png)

### Stan Minikube
* Uruchom Minikube Dashboard:
- minikube start
- minikube dashboard
* Wyświetl działające usługi (k8s) i wdrożenia
* Wyświetl dostępne wdrożenia (stan "przed")
![img1](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img1.png)
![img2](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img2.png)
![img3](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img3.png)

### Wdrożenie kontenera via k8s
* Wdróż przykładowy deployment "hello k8s": ```k8s.gcr.io/echoserver```:
- kubectl create deployment hello --image=k8s.gcr.io/echoserver:1.4
* Użyj ```kubectl run <ctr> --image=<DOCKER_ID>/<IMG> --port=<port> --labels app=ctr```
* Przekieruj porty:
- kubectl port-forward hello-c667fdd6b-lxk5g 8082:8080
![img3.2](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img3.2.png)

* Wykaż że wdrożenie nastąpiło:
![img4](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img4.png)
* W przypadku "niemożliwych" wdrożeń, opisz napotkane ograniczenia

### Deployment
* Utwórz plik YAML z "deploymentem" k8s:
- kubectl create deployment hello --image=k8s.gcr.io/echoserver --dry-run -o yaml > plik.yml
![img5](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img5.png)
* Zestaw 4 repliki, opisz zalety i wady takiej liczby:
Zalety: jeśli jedna replika padnie, to mamy w użyciu pozostałe trzy i aplikacja będzie ciągle działa, ale trzeba zastosować obiekt typu service.
* Zaaplikuj wdrożenie via ```kubectl apply -f plik.yml```:
- kubectl apply -f plik.yml
* Wykaż przeprowadzony deployment
![img6](https://github.com/InzynieriaOprogramowaniaAGH/MDO2022/blob/WK307669/GCL/01/lab05/img/img6.png)
